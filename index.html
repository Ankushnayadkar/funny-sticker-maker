<!DOCTYPE html>
<html>
<head>
<title>Funny Sticker Creator</title>

<style>
body {
  font-family: Arial;
  background: #d9b3d9;
  text-align: center;
}

#canvasWrapper {
  position: relative;
  display: inline-block;
  border: 5px solid white;
  border-radius: 20px;
  overflow: hidden;
}

canvas {
  cursor: grab;
}

.controls {
  margin-top: 10px;
}

input, button {
  padding: 10px;
  margin: 5px;
  font-size: 16px;
}

button {
  background: hotpink;
  border: none;
  color: white;
  border-radius: 10px;
}
</style>
</head>

<body>

<h1>ðŸŽ‰ Funny Sticker Creator ðŸŽ‰</h1>

<div id="canvasWrapper">
  <canvas id="canvas" width="500" height="500"></canvas>
</div>

<div class="controls">
<input type="file" id="upload">
<br>
<input type="text" id="textInput" placeholder="Type funny text">
<button onclick="addText()">Add Text</button>
<br>
<button onclick="download()">Download Sticker</button>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let image = null;
let text = "";
let textX = 50;
let textY = 450;

let dragging = false;

// Upload image
document.getElementById("upload").addEventListener("change", function(e) {
  const reader = new FileReader();
  reader.onload = function(event) {
    image = new Image();
    image.onload = draw;
    image.src = event.target.result;
  };
  reader.readAsDataURL(e.target.files[0]);
});

function addText() {
  text = document.getElementById("textInput").value;
  draw();
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  if (image) {
    ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
  }

  ctx.font = "40px Comic Sans MS";
  ctx.fillStyle = "cyan";
  ctx.strokeStyle = "black";
  ctx.lineWidth = 3;

  ctx.strokeText(text, textX, textY);
  ctx.fillText(text, textX, textY);
}

// Drag logic
canvas.addEventListener("mousedown", e => dragging = true);
canvas.addEventListener("mouseup", e => dragging = false);
canvas.addEventListener("mousemove", e => {
  if (!dragging) return;
  const rect = canvas.getBoundingClientRect();
  textX = e.clientX - rect.left;
  textY = e.clientY - rect.top;
  draw();
});

function download() {
  const link = document.createElement("a");
  link.download = "sticker.png";
  link.href = canvas.toDataURL();
  link.click();
}
</script>

</body>
</html>
