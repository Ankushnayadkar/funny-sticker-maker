<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸŽ‰ Funny Sticker Creator ðŸŽ‰</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #ffe4ec;
      padding: 30px;
    }
    h1 {
      color: #ff4081;
    }
    canvas {
      border: 3px dashed #ff4081;
      margin-top: 20px;
      background: transparent;
    }
    input, button, select {
      margin: 10px;
      padding: 10px 20px;
      border-radius: 8px;
      border: 2px solid #ff4081;
      font-size: 1em;
    }
    button {
      background: #ff4081;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #e91e63;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ‰ Funny Sticker Creator ðŸŽ‰</h1>
  
  <!-- Upload image -->
  <input type="file" id="upload" accept="image/*"><br>
  
  <!-- Enter text -->
  <input type="text" id="textInput" placeholder="Add funny text!"><br>
  
  <!-- Template selector -->
  <label for="templateSelect">Choose Template:</label>
  <select id="templateSelect">
    <option value="circle">Circle</option>
    <option value="star">Star</option>
    <option value="speech">Speech Bubble</option>
    <option value="cloud">Cloud</option>
    <option value="badge">Badge</option>
    <option value="meme">Meme Frame</option>
  </select><br>

  <!-- Font selector -->
  <label for="fontSelect">Choose Font:</label>
  <select id="fontSelect">
    <option value="Comic Sans MS">Comic Sans</option>
    <option value="Impact">Impact</option>
    <option value="Arial">Arial</option>
    <option value="Courier New">Courier</option>
  </select><br>

  <!-- Buttons -->
  <button onclick="addText()">Add Text</button>
  <button onclick="downloadSticker()">Download Sticker</button>
  
  <!-- Canvas preview -->
  <canvas id="canvas" width="400" height="400"></canvas>
  
  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    let uploadedImage = null;

    // Upload image
    document.getElementById("upload").addEventListener("change", function(e) {
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.onload = function(event) {
        const img = new Image();
        img.onload = function() {
          uploadedImage = img;
          drawSticker(); // draw immediately
        }
        img.src = event.target.result;
      }
      reader.readAsDataURL(file);
    });

    // Draw sticker with template + text
    function drawSticker(text = "") {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      const template = document.getElementById("templateSelect").value;

      // Circle template
      if (template === "circle") {
        ctx.beginPath();
        ctx.arc(canvas.width/2, canvas.height/2, canvas.width/2 - 10, 0, Math.PI * 2);
        ctx.fillStyle = "#fff";
        ctx.fill();
        ctx.strokeStyle = "#000";
        ctx.lineWidth = 5;
        ctx.stroke();
      }

      // Star template
      if (template === "star") {
        ctx.fillStyle = "#fff";
        ctx.beginPath();
        for (let i = 0; i < 5; i++) {
          ctx.lineTo(
            canvas.width/2 + 100 * Math.cos((18 + i*72) * Math.PI/180),
            canvas.height/2 - 100 * Math.sin((18 + i*72) * Math.PI/180)
          );
          ctx.lineTo(
            canvas.width/2 + 40 * Math.cos((54 + i*72) * Math.PI/180),
            canvas.height/2 - 40 * Math.sin((54 + i*72) * Math.PI/180)
          );
        }
        ctx.closePath();
        ctx.fill();
        ctx.strokeStyle = "#000";
        ctx.lineWidth = 5;
        ctx.stroke();
      }

      // Image-based templates (speech, cloud, badge, meme)
      if (["speech","cloud","badge","meme"].includes(template)) {
        const templateImg = new Image();
        templateImg.src = "templates/" + template + ".png"; // repo path
        templateImg.onload = () => {
          ctx.drawImage(templateImg, 0, 0, canvas.width, canvas.height);
          if (uploadedImage) {
            ctx.drawImage(uploadedImage, 0, 0, canvas.width, canvas.height);
          }
          drawText(text);
        };
        return;
      }

      // Draw uploaded image inside template
      if (uploadedImage) {
        ctx.save();
        ctx.clip();
        ctx.drawImage(uploadedImage, 0, 0, canvas.width, canvas.height);
        ctx.restore();
      }

      // Add text
      if (text) drawText(text);
    }

    // Text styling
    function drawText(text) {
      const font = document.getElementById("fontSelect").value;
      ctx.font = "bold 32px " + font;
      ctx.textAlign = "center";
      ctx.fillStyle = "#ff4081";
      ctx.strokeStyle = "#000";
      ctx.lineWidth = 3;
      ctx.shadowColor = "rgba(0,255,255,0.7)"; // neon glow
      ctx.shadowBlur = 10;
      ctx.fillText(text, canvas.width/2, canvas.height - 40);
      ctx.strokeText(text, canvas.width/2, canvas.height - 40);
    }

    // Add text button
    function addText() {
      const text = document.getElementById("textInput").value;
      drawSticker(text);
    }

    // Download sticker button
    function downloadSticker() {
      const link = document.createElement("a");
      link.download = "sticker.png";
      link.href = canvas.toDataURL("image/png");
      link.click();
    }
  </script>
</body>
</html>
